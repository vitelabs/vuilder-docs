 version: 2

 build:
    os: ubuntu-lts-latest
    tools:
        nodejs: "latest"
    jobs:
        install:
             - npm install vitepress
        build:
            html:
                # The site was created by running `vitepress init`
                # and following the official guide
                # https://vitepress.dev/guide/getting-started
                - ./node_modules/.bin/vitepress build .
                - for file in $(find ./.vitepress/dist -type f -name "README.html"); do mv "$file" "${file%/*}/index.html"; done
                - mkdir -p $READTHEDOCS_OUTPUT/
                - mv ./.vitepress/dist $READTHEDOCS_OUTPUT/html