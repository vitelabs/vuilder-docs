(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{718:function(e,t,a){"use strict";a.r(t);var o=a(0),s=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"abi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abi"}},[e._v("#")]),e._v(" ABI")]),e._v(" "),a("p",[e._v("The Contract Application Binary Interface (ABI) is the standard way to interact with contracts in the Vite ecosystem, both from outside the blockchain and for contract-to-contract interaction. Data is encoded according to its type, as described in this specification. The encoding is not self describing and thus requires a schema in order to decode.")]),e._v(" "),a("p",[e._v("We assume the interface functions of a contract are strongly typed, known at compilation time and static. We assume that all contracts will have the interface definitions of any contracts they call available at compile-time.")]),e._v(" "),a("p",[e._v("This specification does not address contracts whose interface is dynamic or otherwise known only at run-time.")]),e._v(" "),a("h2",{attrs:{id:"function-selector"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-selector"}},[e._v("#")]),e._v(" Function Selector")]),e._v(" "),a("p",[e._v("The first four bytes of the call data for a function call specifies the function to be called. It is the first (left, high-order in big-endian) four bytes of the blake2b hash of the signature of the function. The signature is defined as the canonical expression of the basic prototype without data location specifier, i.e. the function name with the parenthesised list of parameter types. Parameter types are split by a single comma - no spaces are used.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"solidity",base64:"Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5cHAgXjAuOC4wOwoKY29udHJhY3QgRm9vIHsKICAgIGZ1bmN0aW9uIGJheih1aW50MzIgeCwgYm9vbCB5KSBwdWJsaWMgcHVyZSByZXR1cm5zIChib29sIHIpIHsgciA9IHggJmd0OyAzMiB8fCB5OyB9Cn0K"}}),e._v(" "),a("p",[e._v("Given the contract above the "),a("code",[e._v("baz")]),e._v(" function would be represented as "),a("code",[e._v("0x921bcc0e")]),e._v(" which is the so called Method ID. This is derived as the first 4 bytes of the blake2b hash of the ASCII form of the signature "),a("code",[e._v("baz(uint32,bool)")]),e._v(".")]),e._v(" "),a("h2",{attrs:{id:"argument-encoding"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#argument-encoding"}},[e._v("#")]),e._v(" Argument Encoding")]),e._v(" "),a("p",[e._v("Starting from the fifth byte, the encoded arguments follow. This encoding is also used in other places, e.g. the return values and also event arguments are encoded in the same way, without the four bytes specifying the function.")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("address")]),e._v(": equivalent to "),a("code",[e._v("uint168")]),e._v(", except for the assumed interpretation and language typing.")]),e._v(" "),a("li",[a("code",[e._v("vitetoken")]),e._v(": equivalent to "),a("code",[e._v("uint80")]),e._v(", except for the assumed interpretation and language typing.")]),e._v(" "),a("li",[a("code",[e._v("tokenId")]),e._v(": alias of "),a("code",[e._v("vitetoken")])])]),e._v(" "),a("p",[e._v("For a complete list of types please refer to "),a("a",{attrs:{href:"https://docs.soliditylang.org/en/v0.8.1/abi-spec.html#types",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://docs.soliditylang.org/en/v0.8.1/abi-spec.html#types"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"mapping-solidity-to-abi-types"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mapping-solidity-to-abi-types"}},[e._v("#")]),e._v(" Mapping Solidity++ to ABI types")]),e._v(" "),a("p",[e._v("Solidity++ supports all the types of Solidity with the same names. As with Solidity, some Solidity++ types are not supported by the ABI. The following table shows on the left column Solidity++ types that are not part of the ABI, and on the right column the ABI types that represent them.")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Solidity++")]),e._v(" "),a("th",[e._v("ABI")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("address payable")]),e._v(" "),a("td",[a("code",[e._v("address")])])]),e._v(" "),a("tr",[a("td",[e._v("contract")]),e._v(" "),a("td",[a("code",[e._v("address")])])]),e._v(" "),a("tr",[a("td",[e._v("enum")]),e._v(" "),a("td",[a("code",[e._v("uint8")])])]),e._v(" "),a("tr",[a("td",[e._v("struct")]),e._v(" "),a("td",[a("code",[e._v("tuple")])])])])]),e._v(" "),a("h2",{attrs:{id:"example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[e._v("#")]),e._v(" Example")]),e._v(" "),a("p",[e._v("Given the contract:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"solidity",base64:"Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5cHAgXjAuOC4wOwoKY29udHJhY3QgRm9vIHsKICAgIGZ1bmN0aW9uIGJhcih1aW50MzIgeCwgdml0ZXRva2VuIHQpIHB1YmxpYyBwdXJlIHJldHVybnMgKGJvb2wgcikgeyByID0geCAmZ3Q7IDMyOyB9Cn0K"}}),e._v(" "),a("p",[e._v("Thus for our "),a("code",[e._v("Foo")]),e._v(" example if we wanted to call "),a("code",[e._v("bar")]),e._v(" with the parameters "),a("code",[e._v("123")]),e._v(" and\n"),a("code",[e._v("tti_564954455820434f494e69b5")]),e._v(", we would pass 68 bytes total, which can be broken down into:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("0x176d9ecf")]),e._v(": the Method ID. This is derived as the first 4 bytes of the blake2b hash of\nthe ASCII form of the signature "),a("code",[e._v("bar(uint32,vitetoken)")]),e._v(".")]),e._v(" "),a("li",[a("code",[e._v("0x000000000000000000000000000000000000000000000000000000000000007B")]),e._v(": the first parameter,\na uint32 value "),a("code",[e._v("123")]),e._v(" padded to 32 bytes")]),e._v(" "),a("li",[a("code",[e._v("0x00000000000000000000000000000000000000000000564954455820434f494e")]),e._v(": the second parameter,\na uint80 value "),a("code",[e._v("0x564954455820434f494e")]),e._v(" padded to 32 bytes")])]),e._v(" "),a("p",[e._v("In total:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"MHgxNzZkOWVjZjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwN0IwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDU2NDk1NDQ1NTgyMDQzNGY0OTRlCg=="}}),e._v(" "),a("p",[e._v("It returns a single "),a("code",[e._v("bool")]),e._v(". If, for example, it were to return "),a("code",[e._v("false")]),e._v(", its output would be\nthe single byte array "),a("code",[e._v("0x0000000000000000000000000000000000000000000000000000000000000000")]),e._v(", a single bool.")]),e._v(" "),a("p",[e._v("For more examples please refer to "),a("a",{attrs:{href:"https://docs.soliditylang.org/en/v0.8.1/abi-spec.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://docs.soliditylang.org/en/v0.8.1/abi-spec.html"),a("OutboundLink")],1)])],1)}),[],!1,null,null,null);t.default=s.exports}}]);