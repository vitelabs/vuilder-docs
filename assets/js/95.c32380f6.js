(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{700:function(e,a,t){"use strict";t.r(a);var o=t(0),l=Object(o.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"solppc-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#solppc-js"}},[e._v("#")]),e._v(" solppc-js")]),e._v(" "),t("p",[t("code",[e._v("solppc-js")]),e._v(" is a JavaScript binding for the "),t("a",{attrs:{href:"https://github.com/vitelabs/soliditypp",target:"_blank",rel:"noopener noreferrer"}},[e._v("Solidity++ compiler"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("h2",{attrs:{id:"how-to-install-solppc-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#how-to-install-solppc-js"}},[e._v("#")]),e._v(" How to Install solppc-js")]),e._v(" "),t("p",[e._v("Install the latest stable version of the Solidity++ compiler from npm:")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"bnBtIGluc3RhbGwgc29scHBjCg=="}}),e._v(" "),t("h3",{attrs:{id:"usage-in-command-line"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usage-in-command-line"}},[e._v("#")]),e._v(" Usage in Command-Line")]),e._v(" "),t("p",[e._v("If this package is installed globally ("),t("code",[e._v("npm install -g solppc")]),e._v("), a command-line tool called "),t("code",[e._v("solppcjs")]),e._v(" will be available.")]),e._v(" "),t("p",[e._v("To see all the supported features, execute:")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"c29scHBjanMgLS1oZWxwCg=="}}),e._v(" "),t("p",[e._v("To compile a contract that imports other contracts via relative paths:")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"c29scHBjanMgLS1iaW4gLS1pbmNsdWRlLXBhdGggbm9kZV9tb2R1bGVzLyAtLWJhc2UtcGF0aCAuIE1haW5Db250cmFjdC5zb2xwcAo="}}),e._v(" "),t("p",[e._v("Use the "),t("code",[e._v("--base-path")]),e._v(" and "),t("code",[e._v("--include-path")]),e._v(" options to describe the layout of your project.")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("--base-path")]),e._v(" represents the root of your own source tree")]),e._v(" "),t("li",[t("code",[e._v("--include-path")]),e._v(" specifies extra locations containing external code (e.g. libraries installed with a package manager).")])]),e._v(" "),t("blockquote",[t("p",[e._v("Note: make sure all the files you specify in the command are located inside the base path or one of the include paths.\nThe compiler refers to files from outside of these directories using absolute paths. Having absolute paths in contract metadata will result in your bytecode being reproducible only when it's placed in these exact absolute locations.")])]),e._v(" "),t("blockquote",[t("p",[e._v("Note: this command line interface is not compatible with "),t("code",[e._v("solppc")]),e._v(" provided by the Solidity++ compiler package. Please refer to the\n"),t("RouterLink",{attrs:{to:"/soliditypp/compiler/solppc.html"}},[e._v("solppc")]),e._v(" chapter for instructions to install "),t("code",[e._v("solppc")]),e._v(". Furthermore, the command line interface of solppc-js provides less features than the binary release.")],1)]),e._v(" "),t("h3",{attrs:{id:"usage-in-projects"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usage-in-projects"}},[e._v("#")]),e._v(" Usage in Projects")]),e._v(" "),t("p",[e._v("There are two ways to use "),t("code",[e._v("solppc")]),e._v(":")]),e._v(" "),t("ol",[t("li",[e._v("Through a high-level API giving a general interface to all compiler versions")]),e._v(" "),t("li",[e._v("Through a low-level API giving access to all the compiler interfaces and choose the version of the compiler")])]),e._v(" "),t("h4",{attrs:{id:"high-level-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#high-level-api"}},[e._v("#")]),e._v(" High-level API")]),e._v(" "),t("p",[e._v("The high-level API consists of a single method, "),t("code",[e._v("compile")]),e._v(", which conforms to "),t("a",{attrs:{href:"https://solidity.readthedocs.io/en/v0.5.0/using-the-compiler.html#compiler-input-and-output-json-description",target:"_blank",rel:"noopener noreferrer"}},[e._v("Compiler Standard Input and Output JSON"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("p",[e._v("It also accepts an optional set of callback functions, which include the "),t("code",[e._v("import")]),e._v(" and the "),t("code",[e._v("smtSolver")]),e._v(" callbacks. Starting from 0.6.0 it only accepts an object in place of the callback to supply the callbacks.")]),e._v(" "),t("p",[e._v("The "),t("code",[e._v("import")]),e._v(" callback function is used to resolve unmet dependencies. This callback receives a path and must synchronously return either an error or the content of the dependency as a string.  It cannot be used together with callback-based, asynchronous,\nfilesystem access. A workaround is to collect the names of dependencies, return an error, and keep re-running the compiler until all dependencies are resolved.")]),e._v(" "),t("h4",{attrs:{id:"example-usage-without-the-import-callback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#example-usage-without-the-import-callback"}},[e._v("#")]),e._v(" Example usage without the import callback")]),e._v(" "),t("p",[e._v("Example:")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"dmFyIHNvbHBwYyA9IHJlcXVpcmUoJ3NvbHBwYycpOwoKdmFyIGlucHV0ID0gewogIGxhbmd1YWdlOiAnU29saWRpdHknLAogIHNvdXJjZXM6IHsKICAgICd0ZXN0LnNvbHBwJzogewogICAgICBjb250ZW50OiAnY29udHJhY3QgQyB7IGZ1bmN0aW9uIGYoKSBwdWJsaWMgYXN5bmMgeyB9IH0nCiAgICB9CiAgfSwKICBzZXR0aW5nczogewogICAgb3V0cHV0U2VsZWN0aW9uOiB7CiAgICAgICcqJzogewogICAgICAgICcqJzogWycqJ10KICAgICAgfQogICAgfQogIH0KfTsKCnZhciBvdXRwdXQgPSBKU09OLnBhcnNlKHNvbHBwYy5jb21waWxlKEpTT04uc3RyaW5naWZ5KGlucHV0KSkpOwoKLy8gYG91dHB1dGAgaGVyZSBjb250YWlucyB0aGUgSlNPTiBvdXRwdXQgYXMgc3BlY2lmaWVkIGluIHRoZSBkb2N1bWVudGF0aW9uCmZvciAodmFyIGNvbnRyYWN0TmFtZSBpbiBvdXRwdXQuY29udHJhY3RzWyd0ZXN0LnNvbHBwJ10pIHsKICBjb25zb2xlLmxvZygKICAgIGNvbnRyYWN0TmFtZSArCiAgICAgICc6ICcgKwogICAgICBvdXRwdXQuY29udHJhY3RzWyd0ZXN0LnNvbHBwJ11bY29udHJhY3ROYW1lXS5ldm0uYnl0ZWNvZGUub2JqZWN0CiAgKTsKfQo="}}),e._v(" "),t("h4",{attrs:{id:"example-usage-with-import-callback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#example-usage-with-import-callback"}},[e._v("#")]),e._v(" Example usage with import callback")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"dmFyIHNvbHBwYyA9IHJlcXVpcmUoJ3NvbHBwYycpOwoKdmFyIGlucHV0ID0gewogIGxhbmd1YWdlOiAnU29saWRpdHknLAogIHNvdXJjZXM6IHsKICAgICd0ZXN0LnNvbHBwJzogewogICAgICBjb250ZW50OiAnaW1wb3J0ICZxdW90O2xpYi5zb2xwcCZxdW90OzsgY29udHJhY3QgQyB7IGZ1bmN0aW9uIGYoKSBwdWJsaWMgc3luYyB7IEwuZigpOyB9IH0nCiAgICB9CiAgfSwKICBzZXR0aW5nczogewogICAgb3V0cHV0U2VsZWN0aW9uOiB7CiAgICAgICcqJzogewogICAgICAgICcqJzogWycqJ10KICAgICAgfQogICAgfQogIH0KfTsKCmZ1bmN0aW9uIGZpbmRJbXBvcnRzKHBhdGgpIHsKICBpZiAocGF0aCA9PT0gJ2xpYi5zb2xwcCcpCiAgICByZXR1cm4gewogICAgICBjb250ZW50czoKICAgICAgICAnbGlicmFyeSBMIHsgZnVuY3Rpb24gZigpIGludGVybmFsIHJldHVybnMgKHVpbnQpIHsgcmV0dXJuIDc7IH0gfScKICAgIH07CiAgZWxzZSByZXR1cm4geyBlcnJvcjogJ0ZpbGUgbm90IGZvdW5kJyB9Owp9CgovLyBOZXcgc3ludGF4IChzdXBwb3J0ZWQgZnJvbSAwLjUuMTIsIG1hbmRhdG9yeSBmcm9tIDAuNi4wKQp2YXIgb3V0cHV0ID0gSlNPTi5wYXJzZSgKICBzb2xwcGMuY29tcGlsZShKU09OLnN0cmluZ2lmeShpbnB1dCksIHsgaW1wb3J0OiBmaW5kSW1wb3J0cyB9KQopOwoKLy8gYG91dHB1dGAgaGVyZSBjb250YWlucyB0aGUgSlNPTiBvdXRwdXQgYXMgc3BlY2lmaWVkIGluIHRoZSBkb2N1bWVudGF0aW9uCmZvciAodmFyIGNvbnRyYWN0TmFtZSBpbiBvdXRwdXQuY29udHJhY3RzWyd0ZXN0LnNvbHBwJ10pIHsKICBjb25zb2xlLmxvZygKICAgIGNvbnRyYWN0TmFtZSArCiAgICAgICc6ICcgKwogICAgICBvdXRwdXQuY29udHJhY3RzWyd0ZXN0LnNvbHBwJ11bY29udHJhY3ROYW1lXS5ldm0uYnl0ZWNvZGUub2JqZWN0CiAgKTsKfQo="}}),e._v(" "),t("p",[e._v("The "),t("code",[e._v("smtSolver")]),e._v(" callback function is used to solve SMT queries generated by Solidity's SMTChecker. In case you have an SMT solver installed locally, it can be used to solve the given queries, where the callback must synchronously return either an error or the result from the solver. A default "),t("code",[e._v("smtSolver")]),e._v(" callback is distributed by "),t("code",[e._v("solppc-js")]),e._v(", which relies on either Z3 or CVC4 being installed locally.")]),e._v(" "),t("h4",{attrs:{id:"example-usage-with-smtsolver-callback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#example-usage-with-smtsolver-callback"}},[e._v("#")]),e._v(" Example usage with smtSolver callback")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"dmFyIHNvbHBwYyA9IHJlcXVpcmUoJ3NvbHBwYycpOwp2YXIgc210ID0gcmVxdWlyZSgnc210c29sdmVyJyk7Ci8vIE5vdGUgdGhhdCB0aGlzIGV4YW1wbGUgb25seSB3b3JrcyB2aWEgbm9kZSBhbmQgbm90IGluIHRoZSBicm93c2VyLgoKdmFyIGlucHV0ID0gewogIGxhbmd1YWdlOiAnU29saWRpdHknLAogIHNvdXJjZXM6IHsKICAgICd0ZXN0LnNvbHBwJzogewogICAgICBjb250ZW50OiAncHJhZ21hIGV4cGVyaW1lbnRhbCBTTVRDaGVja2VyOyBjb250cmFjdCBDIHsgZnVuY3Rpb24gZih1aW50IHgpIHB1YmxpYyBhc3luYyB7IGFzc2VydCh4ICZndDsgMCk7IH0gfScKICAgIH0KICB9Cn07Cgp2YXIgb3V0cHV0ID0gSlNPTi5wYXJzZSgKICBzb2xwcGMuY29tcGlsZShKU09OLnN0cmluZ2lmeShpbnB1dCksIHsgc210U29sdmVyOiBzbXQuc210U29sdmVyIH0pCik7Cgo="}}),e._v(" "),t("p",[e._v("The assertion is clearly false, and an "),t("code",[e._v("assertion failure")]),e._v(" warning\nshould be returned.")]),e._v(" "),t("h4",{attrs:{id:"low-level-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#low-level-api"}},[e._v("#")]),e._v(" Low-level API")]),e._v(" "),t("p",[e._v("The low-level API is as follows:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("solppc.lowlevel.compileSingle")]),e._v(": the original entry point, supports only a single file")]),e._v(" "),t("li",[t("code",[e._v("solppc.lowlevel.compileMulti")]),e._v(": supports multiple files, introduced in 0.1.6")]),e._v(" "),t("li",[t("code",[e._v("solppc.lowlevel.compileCallback")]),e._v(": supports callbacks, introduced in 0.2.1")]),e._v(" "),t("li",[t("code",[e._v("solppc.lowlevel.compileStandard")]),e._v(": works just like "),t("code",[e._v("compile")]),e._v(" above, but is only present in compilers after (and including) 0.4.11")])]),e._v(" "),t("p",[e._v("For examples how to use them, please refer to the README of the above mentioned solppc-js releases.")]),e._v(" "),t("h3",{attrs:{id:"linking-bytecode"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linking-bytecode"}},[e._v("#")]),e._v(" Linking Bytecode")]),e._v(" "),t("p",[e._v("When using libraries, the resulting bytecode will contain placeholders for the real addresses of the referenced libraries. These have to be updated, via a process called linking, before deploying the contract.")]),e._v(" "),t("p",[e._v("The "),t("code",[e._v("linker")]),e._v(" module ("),t("code",[e._v("require('solppc/linker')")]),e._v(") offers helpers to accomplish this.")]),e._v(" "),t("p",[e._v("The "),t("code",[e._v("linkBytecode")]),e._v(" method provides a simple helper for linking:")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"dmFyIGxpbmtlciA9IHJlcXVpcmUoJ3NvbHBwYy9saW5rZXInKTsKCmJ5dGVjb2RlID0gbGlua2VyLmxpbmtCeXRlY29kZShieXRlY29kZSwgeyBNeUxpYnJhcnk6ICd2aXRlXzAxMDIwMzA0MDUwNjA3Li4uJyB9KTsK"}}),e._v(" "),t("p",[e._v("As of Solidity 0.4.11 the compiler supports "),t("a",{attrs:{href:"https://solidity.readthedocs.io/en/develop/using-the-compiler.html#compiler-input-and-output-json-description",target:"_blank",rel:"noopener noreferrer"}},[e._v("standard JSON input and output"),t("OutboundLink")],1),e._v(" which outputs a "),t("em",[e._v("link references")]),e._v(" map. This gives a map of library names to offsets in the bytecode to replace the addresses at. It also doesn't have the limitation on library file and contract name lengths.")]),e._v(" "),t("p",[e._v("There is a method available in the "),t("code",[e._v("linker")]),e._v(" module called "),t("code",[e._v("findLinkReferences")]),e._v(" which can find such link references in bytecode produced by an older compiler:")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"dmFyIGxpbmtlciA9IHJlcXVpcmUoJ3NvbHBwYy9saW5rZXInKTsKCnZhciBsaW5rUmVmZXJlbmNlcyA9IGxpbmtlci5maW5kTGlua1JlZmVyZW5jZXMoYnl0ZWNvZGUpOwo="}}),e._v(" "),t("h2",{attrs:{id:"browser-usage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#browser-usage"}},[e._v("#")]),e._v(" Browser Usage")]),e._v(" "),t("p",[e._v("Add the version of "),t("code",[e._v("solppc")]),e._v(" you want to use into "),t("code",[e._v("index.html")]),e._v(":")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"html",base64:"Jmx0O3NjcmlwdAogIHR5cGU9JnF1b3Q7dGV4dC9qYXZhc2NyaXB0JnF1b3Q7CiAgc3JjPSZxdW90O2h0dHBzOi8vZ2l0aHViLmNvbS92aXRlbGFicy9zb2xpZGl0eXBwL3JlbGVhc2VzL2Rvd25sb2FkL2xhdGVzdC9zb2xqc29uLmpzJnF1b3Q7CiZndDsmbHQ7L3NjcmlwdCZndDsK"}}),e._v(" "),t("p",[e._v("This will load "),t("code",[e._v("solppc")]),e._v(" into the global variable "),t("code",[e._v("window.Module")]),e._v(". Then use this inside Javascript as:")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"dmFyIHdyYXBwZXIgPSByZXF1aXJlKCdzb2xwcGMvd3JhcHBlcicpOwp2YXIgc29scHBjID0gd3JhcHBlcih3aW5kb3cuTW9kdWxlKTsK"}}),e._v(" "),t("p",[e._v("Or in ES6 syntax:")]),e._v(" "),t("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"aW1wb3J0ICogYXMgd3JhcHBlciBmcm9tICdzb2xwcGMvd3JhcHBlcic7CmNvbnN0IHNvbHBwYyA9IHdyYXBwZXIod2luZG93Lk1vZHVsZSk7Cg=="}})],1)}),[],!1,null,null,null);a.default=l.exports}}]);